<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>linux-ops - MetaHacks Wiki</title>
    <meta name="keywords" content="wiki, simiki, computer, cognitive,"/>
    <meta name="description" content="my personal wiki"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#linux">linux</a>&nbsp;&#187;&nbsp;linux-ops
    <span class="updated">Updated&nbsp;
      2017-07-02 22:39
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">linux-ops</div>

  <h1 id="linux">Linux 软件源更新</h1>
<p>更改之前注意备份: <code>sudo cp /etc/apt/sources.list /etc/apt/sources.list_backup</code></p>
<div class="hlcode"><pre><span></span><span class="k">deb</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="k">deb</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy-security</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="k">deb</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy-updates</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="k">deb</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy-backports</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="c">##测试版源</span>
<span class="k">deb</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy-proposed</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="c"># 源码</span>
<span class="k">deb-src</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="k">deb-src</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy-security</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="k">deb-src</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy-updates</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="k">deb-src</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy-backports</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="c">##测试版源</span>
<span class="k">deb-src</span> <span class="s">http://cn.archive.ubuntu.com/ubuntu/</span> <span class="kp">willy-proposed</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
</pre></div>


<p>更改的话, 第一个是更改地址, 如阿里云的,  第二个是更改代号即版本, 如 willy(15.10) 修改成 xenial(16.04); </p>
<p><a href="http://wiki.ubuntu.org.cn/%E6%BA%90%E5%88%97%E8%A1%A8">参考</a></p>
<h1 id="openstack">OpenStack 安装问题</h1>
<ol>
<li><code>generate-subunit: command not found</code></li>
</ol>
<div class="hlcode"><pre><span></span>sudo pip install -U os-testr
</pre></div>


<ol>
<li><code>/bin/sh: 1: brctl: not found</code></li>
</ol>
<div class="hlcode"><pre><span></span>sudo apt-get install bridge-utils
</pre></div>


<ol>
<li></li>
</ol>
<div class="hlcode"><pre><span></span>git config --global url.&quot;https://&quot;.insteadOf git://
</pre></div>


<ul>
<li><a href="http://docs.python-guide.org/en/latest/">The Hitchhiker’s Guide to Python!</a></li>
<li><a href="https://www.ustack.com/blog/openstack_hacker/#i">OpenStack Hacker养成指南</a></li>
<li><a href="http://www.ganecheng.tech/blog/53538203.html">用DevStack安装OpenStack(单机)</a></li>
<li><a href="http://chbrian.github.io/cloud/2014/02/22/devstack-/">devstack 安装教程</a></li>
<li><a href="https://docs.openstack.org/mitaka/zh_CN/install-guide-ubuntu/environment.html">openstack</a></li>
</ul>
<h1 id="sudo">配置 sudo 用户.</h1>
<p>首先使用 <code>useradd username</code> 添加新用户，然后设置用户密码 <code>passwd usernmae</code>.<br />
然后 使用 <code>visudo</code> 自动打开 <code>/etc/sudoers</code> 配置文件，在文件加入sudo权限，配置如下：</p>
<div class="hlcode"><pre><span></span>tianqi05    ALL=(ALL)    ALL
‘不要密码
tianqi05    ALL=(ALL)    NOPASSWD:ALL
</pre></div>


<p>最后切换用户<br />
sudo -iu tianqi05</p>
<h1 id="screen">screen 使用简介</h1>
<p>screen 和 tmux有类似的服务。只是screen开启会话后不会新建窗口，还是在当前窗口。</p>
<ol>
<li>screen 创建一个session</li>
</ol>
<div class="hlcode"><pre><span></span>screen -S myNewSession
或者
screen 创建一个名字默认是ttys[ID] 的session.
</pre></div>


<ol>
<li>
<p>从当前 session 暂时断开退出。 <code>ctrl+a+d</code></p>
</li>
<li>
<p>列出当前所有的session. <code>screen -ls</code> </p>
</li>
</ol>
<div class="hlcode"><pre><span></span>There are screens on:
    28007.ttys005.tianqideMacBook-Pro   (Detached)
    28091.myNewSession  (Detached)
2 Sockets in /var/folders/bb/ywfc1vbs5lx_blqpl5ssrvv40000gp/T/.screen.
</pre></div>


<ol>
<li>
<p>恢复某一个session。<code>screen -r myNewSession</code></p>
</li>
<li>
<p>强制杀死一个 session. <code>kill -9 28091</code></p>
</li>
</ol>
<div class="hlcode"><pre><span></span>There are screens on:
    28007.ttys005.tianqideMacBook-Pro   (Detached)
    28091.myNewSession  (Dead ???)
Remove dead screens with &#39;screen -wipe&#39;.
2 Sockets in /var/folders/bb/ywfc1vbs5lx_blqpl5ssrvv40000gp/T/.screen.
</pre></div>


<ol>
<li>
<p>按照提示清理。 <code>screen -wipe</code></p>
</li>
<li>
<p><code>Cannot open your terminal '/dev/pts/0' - please check.</code></p>
</li>
<li>Sign out and properly connect / sign in as the user you wish to use.</li>
<li>Run <code>script /dev/null</code> to own the shell (more info over at Server Fault); then try screen again.</li>
</ol>
<h1 id="iterm2-tmux">配置 iTerm2 和 tmux</h1>
<p>Tmux 是 Terminal multiplexer 的缩写， 其实就是 终端可以复用的意思。 </p>
<p>场景就是，第一种是在本地电脑，你打开了好几个terminal， 每一个terminal由当前的工作环境， 然后这个时候没电了或者你电脑关机了，那么这些terminal的工作状态就没有了。如果使用tmux记录下来，那么这些terminal下次还可以继续使用，并且恢复到关闭时的状态。</p>
<p>第二种就是 ssh 登陆到远程主机， 然后ssh 基本上很容易断开，一般使用 nohup &amp; 在后台运行命令， 但是如果使用 tmux， 就可以记录下来，关闭了也没关系，还可以再次恢复。</p>
<p>执行 tmux -CC 之后会开启一个 session， tmux -CC 默认会以数字编号命名一个回话session， 并开启一个新的iterm窗口，在这个窗口即回话下面， 使用 command+T 可以创建多个窗口（注意不是command + D, 也不是 command + N）， 原来 tmux -CC 创建的窗口会阻塞，可以通过 esc 退出， 然后再通过 tmux -CC attach 恢复， 但是 tmux attach 恢复出来是窗口叠加在一起的， 加 CC 参才会原样恢复。</p>
<p>另外， tmux new -s session_name, 可以给一个session起名字， 以后可以使用 tmux attach -t session_name 恢复某个会话。</p>
<h2 id="_1">局域网下互传大文件</h2>
<p>解决方案很多，第一种不通过中间服务器， 直接两台PC之间互传，如果在同一个局域网之下， 确保可以相互ping通或者Telnet。一台机器充当服务器，另一台客户机， 采用 Python 自带的SimpleHTTPServer即可。客户端 wget http://[IP]:[port]/[path_to_file]</p>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2017 田奇.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2017-09-05 21:00:05</p>
      </span>
    </div>
  </body>
</html>